# <center>**webgl**</center>
<article align="left" padding="0 12px">
WebGL 本质上是基于光栅化的 API ,而不是基于 3D 的 API。

WebGL 只关注两个方面，即**投影矩阵的坐标**和**投影矩阵的颜色**。

**顶点着色器**可以提供投影矩阵的**坐标**

**片段着色器**可以提供投影矩阵的**颜色**

投影矩阵的坐标的范围始终是从 -1 到 1 

代码需要提供成对的方法。每对方法中一个叫顶点着色器， 另一个叫片断着色器，每一对组合起来称作一个 program（着色程序）。

每一个要绘制的对象，需要先设置一系列状态值，然后通过调用 gl.drawArrays 或 gl.drawElements 运行一个着色方法对，使得着色器对能够在GPU上运行。

这些方法对所需的任何数据都需要发送到GPU，这里有着色器获取数据的4种方法。

1.属性（Attributes）和缓冲
缓冲是发送到GPU的一些二进制数据序列，通常情况下缓冲数据包括位置，法向量，纹理坐标，顶点颜色值等。

属性用来指明怎么从缓冲中获取所需数据并将它提供给顶点着色器。
例如你可能在缓冲中用三个32位的浮点型数据存储一个位置值。 对于一个确切的属性你需要告诉它从哪个缓冲中获取数据，获取什么类型的数据（三个32位的浮点数据）， 起始偏移值是多少，到下一个位置的字节数是多少。

2.全局变量（Uniforms）
全局变量在着色程序运行前赋值，在运行过程中全局有效。

3.纹理（Textures）
纹理是数据序列， 可以随意颜色数据,及其它数据。

4.可变量（Varyings）
可变量是一种顶点着色器给片断着色器传值的方式，依照渲染的图元是点， 线还是三角形，顶点着色器中设置的可变量会在片断着色器运行中获取不同的插值(从顶点着色器传值到片断着色器，定义“可变量（varyings）”)


工作原理：
WebGL在GPU上的工作基本上分为两部分，
第一部分是将顶点（或数据流）转换到裁剪空间坐标， 
第二部分是基于第一部分的结果绘制像素点。

顶点着色器（Vertex Shader）是你写进GLSL 中的一个方法，每个顶点调用一次
方法中做一些数学运算后设置了一个特殊的gl_Position变量， 这个变量就是该顶点转换到裁剪空间中的坐标值，GPU接收该值并将其保存起来。
通过给片断着色器的一个特殊变量gl_FragColor设置一个颜色值，实现自定义像素颜色。



渲染管线的作用是将3D模型转换为2维图像。

在早期，渲染管线是不可编程的，叫做固定渲染管线，工作的细节流程已经固定，修改的话需要调整一些参数。

现代的 GPU 所包含的渲染管线为可编程渲染管线，可以通过编程 GLSL，着色器语言 来控制一些渲染阶段的细节。



</article>