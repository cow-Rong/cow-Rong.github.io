# <center>**dashboard设计**</center>
<article align="left" padding="0 12px">

## 概要

数据产品仪表盘（Dashboard）作为用户接触数据的第一个页面，担负着提纲挈领，引导分析的重要职能，帮助用户能够快速判断业务情况，支持他们做出决策并行动。

Dashboard 设计，一个原则，两个时期，三个细则。

一个原则即**提纲挈领，引导分析**：
在一个页面里**明确**告诉用户当前业务状况好坏，
并支持能够针对某个问题进行**下钻**分析，
从而**串联**起整个数据平台。

由此原则从而可推出以下三个细则：
1. **因人而异，细分场景**：根据用户和场景设计产品
2. **少胜于多，分清主次**：展示最关键的指标，区分优先级
3. **深入分析，落地行动**：支持深入分析，并落地为具体行动

**这就像讲一个用户故事。经过起承转合慢慢铺垫，最终进入正题，告诉用户应该怎么去执行，怎么去优化产品和业务。**

各类数据产品在实现前面提到的不同原则时，又可以分为两个时期：Report（定制化）和 Customize（个性化）。
* Report（定制化）：前者是早期形态，如 GA 和 Mixpanel 等，特点是根据指定的分析思路，严谨地从汇总到细分，层层下钻。它们为实现「因人而异」，往往会设定多个 Dashboard 页面，或者本身就只针对某一类用户群体。
* Customize（个性化）：后者更常见于一些比较新型的分析产品，如 Domo 和 Looker，特点是报表自定义程度较高，通过自由选择单图的方式来组建 Dashboard。随着时间的发展，这两者的界限在慢慢模糊，但主要的特点依旧鲜明。

#### 1. 因人而异，细分场景

产品的核心就是解决问题，解决某些用户在某些场景下的某个问题。对于不同行业，不同业务，不同职位的关注的内容不一样。

##### 1.1 划分用户

**不同业务，不同岗位，关注的核心指标、数据层级不同。**
以Domo为例，它为每个**职位**的人单独设一个tab来展示，每个岗位都有自己预设的dashboard页面。也支持用户对这些报表进行内容的增删改查，以及对整体布局进行调整。
所有设计仪表盘的第一件事情，就是明确自己的用户，然后根据不同的用户群体设计仪表盘，及确定开发的优先级。

##### 1.2 划分场景

主要的场景有包括但不局限以下情况：实时监控场景，指定主题分析场景，移动查询场景，周日会汇报场景和大屏显示场景等。

1. 实时监控场景来讲，Dashboard 会被分为实时和历史两种：**实时侧重于监控，历史侧重于了解和分析**。
这两种没有明显的分界，实时需要历史的信息作为对比，来判断当前的数据是否正常。而历史也需要准实时的信息来更快地了解当前的情况。这两种形态的Dashboard 对于数据产品来讲都必不可少。
较好的实时 Dashboard 设计方案，核心在于细分维度的多维监控，并确定合适的阈值点。  

2. 特定主题分析场景来讲，Domo 为每一个数据源设定相应的 Dashboard，如 Facebook 广告，Google ADs 等等。因为每个数据源就代表着一种场景。

3. 移动场景考虑到屏幕等硬件条件的限制，则侧重于通知和展示，不深入到分析部分。到具体产品设计上，则是通过 M 页或者 APP 等方式实现，提供最核心的数据查看和智能挖掘，不做过多的查询功能和复杂的交互。同时，基于现有大部分人通过手机进行沟通，那么页面或数据的分析也变得重要。
同样以 Domo 为例，它在移动端也有相应的场景划分，支持消息的移动推送和展示：

#### 2. 少胜于多，分清主次
根据「提纲挈领，引导分析」的原则，仪表盘的界面上优先展示的指标应该是用户最关心的，在挑选指标时，要遵循一下原则：
1. 从用户的需求出发
2. 精准，精确反映当前业务情况
3. 核心指标不超过7个
4. 确定核心指标间的联系及优先级

Webtrend 作为一款通用的商业分析产品，它在 Dashboard 页面提供了网站用户最关心的 7 个指标，包括最近 30 天的汇总PV，访问量，访问深度，新访问用户，日均访问用户数，平均访问时间，跳出率。同时通过与上个30天的环比的增减，跌涨与红绿对应，能够使用户**一眼就了解到当前业务情况**。

*tips:*
1. 平均值的一项巨大能力就是阻碍决策的制定。但加上（省份间的）分布数据的话，情况就一目了然了。
2. 百分比/比率，要注意显示对比绝对值。
*通常需要通过鼠标悬浮的方式展示每个核心指标的定义，在有条件的情况下，还需要对每个数据异动提供注释。在 Mixpanel 中，它支持在某个指标的某个时间点上添加备注，来说明数据变化的原因。*

#### 3. 深入分析，落地行动
分析无非「对比，细分，溯源」，从这个角度讲，仪表盘的设计需要让用户能够在「提纲挈领」之余，也要能提供给用户分析思路。当发现数据异常时，能够沿着思路自主得到答案，或者分析方向。

##### 3.1 对比
没有对比就没有分析，从各种指标的对比中才能看出指标的偏离。对比可分为三大维度：
1. 时间维度：同比，环比
2. 空间维度：地区对比，团队对比，商品／服务/渠道对比
3. 设计维度：目标值，业界值，极限值等与实际值的对比

##### 3.2 细分
细分是对核心指标进行多维度的划分，分为单维度细分，多维度细分，流程细分及TonN细分等等。
用户可以在页面对不同指标进行**切换**。当你对某些数据有疑问时，你可以通过点击相应的**维度跳转**进入各个子页面，起到了「引领分析」的作用。

流程细分一般是指的从漏斗的角度去拆解指标的上下游。举例来说，当我们关注的指标是支付订单数时，我们就需要去拆分从列表页，详情页，下单页到支付页的每个流程的数据及转化。

TopN 细分则是注重看中某个维度下占比前列的维度值的变化，来直接反映某些指标值的变化。

##### 3.3 溯源

其实，溯源作为一个对于数据异变根本原因的追查过程，很难融合在以简洁为原则的 Dashboard 中，不过 Amplitude 通过隐藏选项并且通过和内在其他功能的融合，很好地解决了这个问题。

首先提供了不同主题，不同形式的数据的对比细分展示。而在某类具体业务和数据点上，我们可以选取某个时间点的用户群体作为 Cohort 对象或者针对这批用户的流向结合产品内其他功能进行分析。它甚至能够将整个用户id列表下载下来，做线下分析。

事实上，对比，细分和溯源不是严格区分出来的三个流程，而是互相融合在一起的。在不断地在异常的维度上进行对比和细分时，才能得到可以付诸行动的结果。

##### 3.4 行动

在设计仪表盘时，要反复地问自己“So What”：从设定用户场景，到确定指标和优先级，再经历对比细分溯源三个分析流程，最后要做的，就提供给用户决策和行动的建议和方向。
**先假定几个异常的场景，然后通过设计出来的仪表盘，演练拆解场景中出现的问题**。如果能够在若干个场景中都顺利走通，那就证明你整个设计能够支持用户做出决策和行动，已经马克森斯了。

再往上一层，就是能够直接给出业务建议的层次了。这个一方面需要对业务的极度熟悉，另一方面可能还需要数据挖掘和机器学习的内容。
#### 4. 设计原则
刚开始做 Dashboard 设计时，不要一上来就画原型图，而是**先划分用户和场景**，然后用思维脑图**确认核心指标和衍生维度**。再根据思维脑图画出**草图**，演练几遍在 3.4 提到的「用户故事」。在整个流程都走顺之后，再开始仪表盘的设计。

**在设计细节上，不要刻意追求炫酷的效果，而是注重设计的内在逻辑和传递消息的有效性**。

在功能设计上：
* 突出核心指标：不能让复杂的设计掩盖了指标的呈现
* 突出对比：时间对比，空间对比，设计对比等等
* 提供细分及下钻：方便用户在有疑问时能够快速得到方向
* 减少用户选择：提供默认的同环比和时间选择，提供最常见的维度切分

在可视化设计上：
* 简洁为上：减少Tab、按钮、单选框、复选框，在1-2个页面里完成展示
* 避免过多的颜色和点缀：太多的颜色会让人眼花缭乱，失去重点
* 选择正确的可视化形式，可参见华尔街是怎么做可视化的

1. **总分式，先展示核心指标，再对核心指标进行拆分**
因为指标往往比较多，通常会通过加上指标筛选框或者 Tab 的方式来进行区分。把不必要的label，分割线，侧边线条去掉，直接的展示内容。

2. **分散式，常见于 Customize 类型的数据产品，形式是若干个报表集中在一个页面展示**
信息量太大，让用户一下子不知道该关系哪个指标。**建议此类产品必须可以定制每个单图的大小，从而起到「少胜于多，分清主次」的作用。**

#### 5. Report && Customize

Report Dashboard 适用于整个市场的数据利用意识处于早期阶段，分析思路匮乏，对指标的需求比较单一，只能由设计者提供一个抽象普适的分析思路，供用户日常使用。  
例如：Google Analytics 中根据分析主题划分出受众群体，流量获取，行为，转化四个子菜单，每个菜单会再按照菜单层次依次往下拆分，就像一层层金字塔一样。  

而随着数据运营的方法论越来成熟，整个数据采集和分析工具越来越先进时，原先的方案已经不能满足人们的需求。不同的人，同一个人不同时期关注的内容都不一样。因此对个性化的要求便能越来越高。  
例如：Looker 中，会采取这种分散的图表的组织方式，每个图表都可以再次编辑。整个分析页面，不再是简单的图和表的堆砌，而是变成了一个画布。用户可以在这个画布上放置他们任意想要的内容。
不过，Customize Dashboard 会面临几个问题：
1. 对底层数据的规范要求较高；
2. 对使用者要求较高，这需要用户有十分明确的分析思路及定义指标的概念。
为了解决这个问题，很多产品便提出了两者相融合的方式：
在 Customize Dashboard 的基础上，提供一些默认的报表，方便用户使用。允许用户修改，从而具备更大的自由性，适用于跨业务跨部门的情况。同时带来的问题就是分析思路不明确，可能没有重点和框架，用户在分析使用的过程中容易困惑。这种情况下，**预定义的多主题的 Dashboard 和分析思路就显得非常重要，否则整个产品的上手难度会比较高。**

在 Kilometer.io 的设计中，它会给用户**预设几个常见的模板**，同时**允许用户对模板进行自定义的编辑**。这是很多 TOB 数据产品都具备的功能，而 kilometer.io 比其他产品更进一步的做法时，在自主添加报表时，它同样**提供了默认的指标和形式**供你选择，避免了用户在自定义报表时无所适从的问题。

当数据仓库基础已经完善或业务需求非常多样化的时候，就可以开始考虑这种架构了。

## ISOP中现状

1. 仍采用Report Dashboard方式、按区域展示固定面板，用户无法根据自身需要调整重点关注重点模块（包括位置、大小，和指标等的展示）。  

2. 固定数据展示，数据类型简单，不能灵活展示业务信息。

3. 可视化图形固定，类型上以单一展示为主，没有对比（如数据、趋势展示和top分析结合等）、类型切换，不利于直观了解到当前业务情况。

4. 由于数据、图形和位置的固定单一，在溯源上更是难以实现。

因此我们将其调整为Customize Dashboard，以自定义+常用模板、指标的方式，提供给用户选择、自行调整关注重点、信息，并可以添加、组合各种自定义可视化图形，同时展示多种场景的Dashboard面板。

## 目标

优化实现用户自定义dashboard面板，提高Dashboard易用性和实用性：

1. 以自定义Customize Dashboard+常用模板、指标的方式，让用户可自行调整关注重点模块的显示，给用户提供更好的使用体验。  

2. 按照业务类型分类，提供丰富的业务信息指标选择，指标展示的区间范围和展示类型（对比/全量/top）都可以自定义，更能突出给到用户关心的业务信息。

3. 面板图形展示方式、和位置大小的自由调整，可以帮助用户按照自己的溯源思路制定自己的dashboard流程面板，更快的发现、解决业务实际问题。

4. 提供默认几种常见问题的场景模板，给用户更好的引导，多场景dashboard也能更好适应实际应用中的复杂问题。


## 特点

* 使用数据创建仪表板
* 快速灵活的可视化以及多种选择，可以以任何方式可视化数据
* 通过动态明细浏览数据。拆分视图并排比较不同的时间范围，查询和数据源，探索指标

## 需求点

1、可以保存多个场景的Dashboard页面
2、可以展示多个场景Dashboard页面（tab位置可调）
3、每个Dashboard页面可以自由添加，修改，复制、删除面板和区间名
4、添加或者修改单个面板：
    可以指定图形类型（可选、可自己加）
    可以指定数据源（横纵坐标类型，数量等）
5、单个面板可以自由拖拽大小和位置
6、可视化图形可通过代码，自行添加配置

周边：
1、下钻、串联整个数据平台
2、刷新监控（全局+独立：手动、自动定时刷新）
3、预设常用几个dashboard场景模板、预设数据类型分类指标和默认几种可视化展示图形

另外细节：
1、目前图形只做数据统计：
建议时间轴角度，趋势图，折线图、表格也要包括，这种带时间区间的时间与全局时间设置时间无关（可以打印出来？）
上趋势，下top数量展示等

2、监控配置是哪个监控页面的配置，建议收进去，攻击者监控几个页面是否包含为默认场景模板？

3、多个监控页面配置（通过直接点击下拉可多选，也可以更多新打开完整的列表页面编辑修改）

## 具体需求（待完善）:
1、dashboard页面可以添加配置多个
2、多个dashboard页面可以自由选择是否展示（多选）
3、可以在dashboard列表页面新增、修改编辑、删除dashboard页面
4、可以拖动各个dashboard页面tab的先后展示位置顺序
5、在dashboard列表的新增、修改页面，或者在展示的监控页面中都可以改动dashboard页面内容

单个dashboard页面内容：
6、可以新增区域行title、可以新增面板、复制面板、面板大小位置可调整
7、可以修改时间（全局）
8、可以全局刷新（可以定时刷新）
9、在没有设置全局定时刷新的情况下可以单独对每个面板(定时)刷新
（鼠标浮动到标题才展示刷新图标、设置了单个定时刷新的单个图标一直展示）
10、鼠标浮动到每个面板的标题处有向下箭头，可以下拉展示编辑、删除、复制、导出功能

面板新增、编辑功能：
11、面板可以对名字、横纵坐标的值、显示数值范围编辑修改
12、面板可以对坐标，边距，颜色，大小进行修改调整
13、面板可以对展示图形类型调整
14、面板中的图形库可以自行增加

## 原型、接口设计



## 内部支持内容


## 技术点

React
Redux
Rxjs
react-sizeme
React-Grid-Layout
monaco-editor(react-monaco-editor)
xss.js

</article>